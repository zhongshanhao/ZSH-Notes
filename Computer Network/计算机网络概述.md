## 计算机网络概述
三网
- 电信网络（打电话）
- 计算机网络（上网）
- 有线电视网络（看电视）

### 网络（Network）、互连网（Network of Networks、Internet）

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.png" alt="计算机网络" style="zoom: 67%;" />

计算机网络由若干个结点和连接这些结点的链路组成，网络中的结点可以是计算机、集线器、交换机或路由器。

网络之间还可以通过路由器互连起来，这就构成了一个覆盖范围更大的计算机网络，这样的网络称为互连网。

### 互联网（Internet）

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E5%9B%A0%E7%89%B9%E7%BD%91.png" alt="因特网" style="zoom:50%;" />

互联网就是全球最大的一个互连网，不同地域的人们只需要将计算机接入到该网络中就可以彼此通信。

### 互联网发展的三个阶段

- ARPANET向互连网发展

- 三级结构的互联网

- 多层次ISP结构的互联网

ISP（Internet Service Provider）互联网服务提供商（如中国电信、联通、移动）

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E5%A4%9A%E5%B1%82%E6%AC%A1ISP%E7%BB%93%E6%9E%84%E7%9A%84%E4%BA%92%E8%81%94%E7%BD%91.png" alt="多层次ISP结构的互联网" style="zoom:50%;" />

根据提供服务的覆盖面积大小以及所拥有的IP地址数目的不同，ISP也分为不同层次的ISP：主干ISP、地区ISP和本地ISP。

主干ISP由几个专门的公司创建和维持，服务面积最大，并且还拥有高速主干网，地区ISP是一些较小的ISP，它们位于等级中的第二层，数据率也低一些。本地ISP给用户提供直接的服务，它可以是一个提供互联网服务的公司，或者是一个运行自己的网络的学院或大学。

根据服务对象将服务器放在不同位置，如果仅仅给学校内的学生使用，那么挂在本地ISP就可以，如果服务器要给全球用户提供服务，那么应该挂在第一层ISP下速度会快。

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/ISP%E4%B8%8E%E4%BC%81%E4%B8%9A%E7%BD%91%E4%B8%8E%E7%BD%91%E6%B0%91.png" alt="ISP与企业网与网民" style="zoom:67%;" />

青园小区的用户接在电信上，使用的是电信网，因此在访问网通机房的时候会慢些，访问电信机房会快些，因此一些企业可以设置双线机房来提高不同网络用户访问网站的速度。

### 互联网的组成

- 边缘部分：由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信和资源共享
- 核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的。

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90.png" alt="互联网的组成" style="zoom:67%;" />

#### 边缘部分的两种通信方式

客户-服务器方式

在图1-7中，主机A运行客户端程序而主机B运行服务器程序，在这种情况下，A是客户而B是服务器，客户A向服务器B发出服务请求，而服务器B向客户A提供服务。

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E5%AE%A2%E6%88%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F.png" alt="客户服务器工作方式" style="zoom: 67%;" />

对等连接方式

对等连接是指两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方，只要两台主机都运行了对等连接软件（P2P软件），它们就可以进行平等的、对等连接通信。这时，双方都可以下载对方已经存储在硬盘中的共享文档。

P2P方式广泛用在文件下载方面，如果使用的是客户-服务器方式，那么多个用户要下载文件就需要共享服务器的带宽，那么必然会导致下载速率较慢，采用P2P方式下载，一个主机下载了部分文件，那么其他主机就能从该主机下载该文件，这能提供传输效率。

![对等连接工作方式](https://gitee.com/Krains/FigureBed/raw/master/img/%E5%AF%B9%E7%AD%89%E8%BF%9E%E6%8E%A5%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F.png)

#### 核心部分

- 电路交换：整个报文的比特流连续地从源点直达终点，好像在一个管道中传送（打电话）
- 报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点
- 分组交换：单个分组（整个报文的一部分）传送到相邻结点，存储下来后查找转发表，转发到下一个结点

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2.png" alt="分组交换" style="zoom:67%;" />

### 计算机网络的性能指标

#### 速率

连接在计算机网络上的主机在数字信道上传送数据位数的速率，速率的单位是 bit/s（比特每秒）（或 b/s、也可是写成bps，即bit per second）

与计算机领域中的单位不同，这里速率 1kbit/s = 1000 bit/s，1Mbit/s = 1000000 bit/s，带宽也与这个单位相同。

#### 带宽

带宽表示在单位时间内网络中的某信道所能通过的“最高数据率”。一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高，但与当前网络速率没有绝对关系。

#### 吞吐量

吞吐量表示在单位时间内通过某个网络（或信道、接口）的实际的数据量。速率是指某个信道，吞吐量指某个网络，一个网络可以包含多条信道。

#### 时延

时延是指数据从网络的一端传送到另一端所需的时间。网络中的时延由以下几个不同部分组成：

发送时延

发送时延是主机或路由器发送数据帧所需要的时间，发送时延 = 数据帧长度（bit）/ 发送速率（bit/s）

传播时延

传播时延是电磁波在信道中传播一定的距离需要花费的时间，传播时延 = 信道长度（m）/ 电磁波在信道上的传播速率（m/s）

处理时延

主机或路由器在收到分组时要花费一定的时间进行处理，例如分析分组的首部、从分组中提取数据部分、进行差错检验或查找适当的路由等。

排队时延

分组在经过网络传输时，要经过许多路由器，但分组在进入路由器后要先在输入队列中排队等待处理。

![计算机网络的时延](https://gitee.com/Krains/FigureBed/raw/master/img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%97%B6%E5%BB%B6.png)

错误概念：在高速链路（或高带宽链路）上，比特会传送得更快些。

这是不对的，对于高速网络链路，我们提高的仅仅是数据发送速率而不是比特在链路上的传播速率。荷载信息的电磁波在通信线路上的传播速率（这是光速的数量级）取决于通信线路的介质材料，而与数据的发送速率并无关系，提高数据的发送速率只是减少了数据的发送时延。

#### 往返时间RTT

在计算机网络中，往返时间RTT（Round-Trip Time）是一个重要的指标。它是从发送方发送数据开始，到发送方收到接受方确认的时间。

利用率$D_0$表示网络空闲时的时延，D表示网络当前的时延

$$D=\frac{D_0}{1-U}$$

信道或网络的利用率过高会产生非常大的时延（极大增加了排队时延）。

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E6%97%B6%E5%BB%B6%E4%B8%8E%E5%88%A9%E7%94%A8%E7%8E%87%E7%9A%84%E5%85%B3%E7%B3%BB.png" alt="时延与利用率的关系" style="zoom:67%;" />

### 计算机网络体系架构

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png" alt="计算机网络体系结构" style="zoom:67%;" />

应用层

运算层

网络层

数据链路层

物理层

<img src="https://gitee.com/Krains/FigureBed/raw/master/img/%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%90%84%E5%B1%82%E4%B9%8B%E9%97%B4%E7%9A%84%E4%BC%A0%E9%80%92%E8%BF%87%E7%A8%8B.png" alt="数据在各层之间的传递过程" style="zoom:67%;" />







